<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Moving datafiles,control files and log files &amp;#8211; Part 1 | My New Hugo Site</title>
    <link rel="stylesheet" href="/quickstart2/css/style.css" />
    <link rel="stylesheet" href="/quickstart2/css/fonts.css" />
    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/quickstart2/">Home</a></li>
      
      <li><a href="/quickstart2/blog1/">Blog 1</a></li>
      
      <li><a href="/quickstart2/blog2/">Blog 2</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">Moving datafiles,control files and log files – Part 1</span></h1>
<h2 class="author">Sidhu</h2>
<h2 class="date">2007/07/21</h2>
</div>

<main>
<p>Many times you need to move datafiles from one location to another. The simplest approach for this is to take the tablespace offline, copy the datafiles to new location, rename the files with <em>alter database rename file</em> (Except that you dont have to move the SYSTEM and UNDO tablespace, as you can’t take SYSTEM tablespace offline)</p>
<pre tabindex="0"><code>&lt;pre class=&#34;brush: css; title: ; notranslate&#34; title=&#34;&#34;&gt;

SYS@orcl AS SYSDBA&gt; alter tablespace system offline;
alter tablespace system offline
*
ERROR at line 1:
ORA-01541: system tablespace cannot be brought offline; shut down if necessary

SYS@orcl AS SYSDBA&gt;
</code></pre><p>Well lets try moving USERS tablespace.</p>
<pre tabindex="0"><code>&lt;pre class=&#34;brush: css; title: ; notranslate&#34; title=&#34;&#34;&gt;

SYS@orcl AS SYSDBA&gt; column file_name format a50

SYS@orcl AS SYSDBA&gt; set lines 100
SYS@orcl AS SYSDBA&gt; select file_name,tablespace_name from dba_data_files where tablespace_name=&#39;USERS&#39;;

FILE_NAME                                          TABLESPACE_NAME
-------------------------------------------------- ------------------------------
C:\ORACLE\ORCL\USERS01.DBF                         USERS

SYS@orcl AS SYSDBA&gt;
</code></pre><p>The current location of the datafile is C:\ORACLE\ORCL\. Suppose I have to move it to c:\oracle\oradata. So first lets take the tablespace offline</p>
<pre tabindex="0"><code>&lt;pre class=&#34;brush: css; title: ; notranslate&#34; title=&#34;&#34;&gt;

SYS@orcl AS SYSDBA&gt; alter tablespace users offline;

Tablespace altered.

SYS@orcl AS SYSDBA&gt;
</code></pre><p>Now copy the datafile to new location [Note the new directory should be already created]</p>
<pre tabindex="0"><code>&lt;pre class=&#34;brush: css; title: ; notranslate&#34; title=&#34;&#34;&gt;

C:\oracle\ORCL&gt;copy USERS01.DBF c:\oracle\oradata
1 file(s) copied.

C:\oracle\ORCL&gt;
</code></pre><p>Now make database aware of the new location of the datafile using <!-- raw HTML omitted -->alter database rename file<!-- raw HTML omitted -->:</p>
<pre tabindex="0"><code>&lt;pre class=&#34;brush: css; title: ; notranslate&#34; title=&#34;&#34;&gt;

SYS@orcl AS SYSDBA&gt; alter database rename file &#39;c:\oracle\orcl\users01.dbf&#39; to &#39;c:\oracle\oradata\users01.dbf&#39;;

Database altered.

SYS@orcl AS SYSDBA&gt;
</code></pre><p>The last thing is to bring the tablespace online. If everything has gone rightly the message like this will appear and you can view the new location of the datafile.</p>
<pre tabindex="0"><code>&lt;pre class=&#34;brush: css; title: ; notranslate&#34; title=&#34;&#34;&gt;

SYS@orcl AS SYSDBA&gt; alter tablespace users online;

Tablespace altered.

SYS@orcl AS SYSDBA&gt; select file_name,tablespace_name from dba_data_files where tablespace_name=&#39;USERS&#39;;

FILE_NAME                                          TABLESPACE_NAME
-------------------------------------------------- ------------------------------
C:\ORACLE\ORADATA\USERS01.DBF                      USERS

SYS@orcl AS SYSDBA&gt;
</code></pre><p>In next post we will discuss moving datafiles, controlfiles and logfiles.</p>

</main>

  <footer>
  
  
  </footer>
  </body>
</html>

